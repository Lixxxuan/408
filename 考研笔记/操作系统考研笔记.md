# 操作系统考研笔记

## 1.计算机系统概述

### 1.操作系统的基本概念

- 系统调用是由操作系统提供给用户的，它==只能通过用户程序间接使用==
- ==制约性，间断性，共享性属于多道程序设计的基本特征==，顺序性不是
- 单处理机系统中，进程与进程不可并行处理
- 计算机开机后，操作系统最终被加载到RAM中

### 2. 操作系统发展历程

- 实时操作系统必须在==被控制对象规定时间内==处理来自外部的事件
- 分时系统追求的目标是==比较快速响应用户==
- 允许多个用户以交互的方式使用计算机的操作系统称为==分时操作系统==；允许多个用户将若干作业提交给计算机系统集中处理的操作系统称为==批处理系统==；在==实时操作系统==的控制下，计算机系统能及时处理由过程控制反馈的数据并及时作出响应；在IBM-PC中，操作系统称为==微型计算机操作系统==
- ==中断技术使得多道批处理系统的I/O设备可与CPU并行工作==

### 3. 操作系统运行环境

- 输入输出指令必须在核心态下执行
- 操作系统中，==通道技术是一种硬件技术==
- ==用户程序在用户态下要使用特权指令引起的中断属于访管中断==
- 进程调度不需要硬件的支持
- 从核心态到用户态的转换是由==操作系统程序==执行后完成的，而用户态到核心态的转换则是由==硬件==完成的
- ==访管指令仅在用户态下使用，执行访管指令，将用户态转变为核心态==
- 广义指令即为系统调用指令
- 命令解释程序在用户态执行
- 子程序调用只需保存程序断点，即该指令的下一条指令的地址；==中断处理不仅要保存断点（PC的内容），还要保存程序状态字寄存器（PSW）的内容==。
- 处理外部中断时，应该由操作系统保存的是==通用寄存器的内容==
- 异常是指令执行过程中在处理器内部发生的特殊事件，中断是来自处理器外部的请求事件。==访存时缺页属于异常==
- 执行系统调用的过程包括如下主要操作：①传递系统调用参数 ②执行陷入（trap）指令 ③执行相应的服务程序 ④返回用户态

### 4.操作系统结构

- 用==分层式架构设计==的操作系统结构清晰且便于调试
- 分层式结构具有非常灵活的依赖关系是错误的
- 微内核OS的主要缺点是==性能问题==，因为需要频繁地在核心态和用户态之间进行切换，因而切换开销偏大
- 可以从4个方面来描述微内核OS，①内核足够小 ②基于客户服务器模式 ③应用“机制与策略分离”原理 ④采用面向对象技术

- ==添加系统服务时，不必修改内核是微内核的优点==
- 一般来说==内核的服务越少内核越稳定==，所以微内核结构比单一内核稳定
-  Windows是宏内核操作系统
- ==计算机操作系统的引导程序位于硬盘中==
- 引导程序分为两种：一种是位于ROM中的自举程序（BIOS的组成部分），用于启动具体的设备；另一种是位于装有操作系统硬盘的活动分区的引导扇区中的引导程序（称为启动管理器），用于引导操作系统
-  BIOS将控制权交给排在首位的启动设备后，CPU将该设备主引导扇区的内容（主引导记录MBR）加载到内存中，然后由MBR检查分区表，查找活动分区，并将该分区的引导扇区的内容（分区引导记录PBR）加载到内存加以执行。

## 2. 线程与进程

### 1. 进程与线程

- 线程包含CPU现场，可以独立执行程序
- ==线程没有自己独立的地址空间，它共享其所属的进程的空间==
- 进程获得处理器运行是通过调度得到的
- 并发进程失去封闭性是指并发进程共享变量，其执行结果与速度有关

- 不管系统中是否有线程，进程都是拥有资源的独立单位
- 内核级线程是处理机调度和分派的基本单位
-  C语言编写的程序在使用内存时一般分为三个段，二进制代码和常量存放在正文段，动态分配的存储区在数据堆栈，临时使用的变量在数据栈段。==函数调用实参传递值在栈段==
- ==同一进程或不同进程内的线程都可以并发执行==
- 整个系统只有一个键盘，而且键盘输入是人的操作，速度比较慢，完全可以使用一个线程来处理整个系统的键盘输入。

- ==用户登录成功，启动程序执行可以创建新进程，设备分配不能创建新进程==
- ==进程对管道进行读操作和写操作都可能被阻塞==

### 2. 处理机调度

- ==时间片轮转调度算法是为了多个用户能及时干预系统==
-  CPU繁忙型作业是指该类作业需要大量的CPU时间进行计算，而很少请求I/O操作。因此先来先服务调度算法（有利于长作业）有利于CPU繁忙型的作业，而不利于I/O繁忙型的作业
- ==时间片轮转调度算法是绝对可抢占的==
- 作业是用户提交的，进程是由系统自动生成的，除此之外两者的区别是==前者以用户任务为单位，后者以操作系统控制为单位==
- 分时操作系统通常采用==时间片轮转调度算法==来为用户服务
- 假设系统中所有进程同时到达，则使进程平均周转时间最短的是==短进程优先调度算法==
-  Unix属于分时操作系统
- 中断向量本身是用于存放中断服务例行程序的入口地址，因此中断向量地址就是该入口地址的地址
- 中断由硬件保护并完成，==主要是为了保证系统运行可靠，正确==，提高处理速度也是一个好处，但不是主要目的
- ==创建新进程后能进行处理器调度；在进程处于临界区时能进行处理机调度==
- 一般来说，==I/O型作业的优先级高于计算型作业的优先级==

### 3. 同步与互斥

